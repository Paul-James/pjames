<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a grouped hash table instead of using split() — hashcol • pjames</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Create a grouped hash table instead of using split() — hashcol" />

<meta property="og:description" content="Takes a dataframe column you want to group by and returns a hash table. The keys are the unique values of the group by column and the values are the row numbers where each key is found. This is parallelized across all available cores on your CPU and is a direct and much faster replacement of split(df, df$group_by)." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pjames</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.5.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://www.twitter.com/pauljames379">
    <span class="fa fa-twitter fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/paul-james/pjames">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a grouped hash table instead of using split()</h1>
    <small class="dont-index">Source: <a href='https://github.com/paul-james/pjames/blob/master/R/hashcol.R'><code>R/hashcol.R</code></a></small>
    <div class="hidden name"><code>hashcol.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Takes a dataframe column you want to group by and returns a hash table. The keys are the unique values of the group by column and the values are the row numbers where each key is found. This is parallelized across all available cores on your CPU and is a direct and much faster replacement of split(df, df$group_by).</p>
    
    </div>

    <pre class="usage"><span class='fu'>hashcol</span>(<span class='no'>X</span>, <span class='kw'>n.cores</span> <span class='kw'>=</span> <span class='fu'>detectCores</span>() - <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>A dataframe column you want to group by. IE: <code>df$id</code></p></td>
    </tr>
    <tr>
      <th>n.cores</th>
      <td><p>An integer value that indicates the number of cores you want to run the process on. The default is 1 less than the total number of available cores on the CPU for UNIX flavored OSs, while the only option (currently) on Windows OS is 1.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Check the OS and chooses the correct package to use for mclapply. The pkg <code>parallelsugar</code> can be used for Windows (...but it's currently not) while <code>parallel</code> is used for everything else.</p>
<p>WARNING FOR WINDOWS USERS: not paralellized; only runs <code>lapply</code> instead of <code>mclapply</code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>parallel</code>, <code>mclapply</code>, <code>hash</code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>asd</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(
    <span class='kw'>id</span>               <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='no'>letters</span>, <span class='kw'>times</span> <span class='kw'>=</span> <span class='fl'>5</span>)
  , <span class='kw'>service</span>          <span class='kw'>=</span> <span class='fu'>sample</span>(
      <span class='fu'>c</span>(<span class='st'>'ps1'</span>, <span class='st'>'ps2'</span>, <span class='st'>'ps3'</span>, <span class='st'>'ps4'</span>, <span class='st'>'ps5'</span>, <span class='st'>'ps6'</span>, <span class='st'>'ps7'</span>)
    , <span class='kw'>size</span>    <span class='kw'>=</span> <span class='fl'>26</span> * <span class='fl'>5</span>
    , <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
    )
  , <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
  )
<span class='no'>h</span> <span class='kw'>&lt;-</span> <span class='fu'>hashcol</span>(<span class='no'>asd</span>$<span class='no'>id</span>, <span class='kw'>n.cores</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='no'>h</span></div><div class='output co'>#&gt; &lt;hash&gt; containing 26 key-value pair(s).
#&gt;   a :   1  27  53  79 105
#&gt;   b :   2  28  54  80 106
#&gt;   c :   3  29  55  81 107
#&gt;   d :   4  30  56  82 108
#&gt;   e :   5  31  57  83 109
#&gt;   f :   6  32  58  84 110
#&gt;   g :   7  33  59  85 111
#&gt;   h :   8  34  60  86 112
#&gt;   i :   9  35  61  87 113
#&gt;   j :  10  36  62  88 114
#&gt;   k :  11  37  63  89 115
#&gt;   l :  12  38  64  90 116
#&gt;   m :  13  39  65  91 117
#&gt;   n :  14  40  66  92 118
#&gt;   o :  15  41  67  93 119
#&gt;   p :  16  42  68  94 120
#&gt;   q :  17  43  69  95 121
#&gt;   r :  18  44  70  96 122
#&gt;   s :  19  45  71  97 123
#&gt;   t :  20  46  72  98 124
#&gt;   u :  21  47  73  99 125
#&gt;   v :  22  48  74 100 126
#&gt;   w :  23  49  75 101 127
#&gt;   x :  24  50  76 102 128
#&gt;   y :  25  51  77 103 129
#&gt;   z :  26  52  78 104 130</div><div class='input'>
<span class='kw pkg'>hash</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/hash/topics/keys'>keys</a></span>(<span class='no'>h</span>)</div><div class='output co'>#&gt;  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
#&gt; [20] "t" "u" "v" "w" "x" "y" "z"</div><div class='input'><span class='kw pkg'>hash</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/hash/topics/values'>values</a></span>(<span class='no'>h</span>)</div><div class='output co'>#&gt;        a   b   c   d   e   f   g   h   i   j   k   l   m   n   o   p   q   r
#&gt; [1,]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
#&gt; [2,]  27  28  29  30  31  32  33  34  35  36  37  38  39  40  41  42  43  44
#&gt; [3,]  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70
#&gt; [4,]  79  80  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96
#&gt; [5,] 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122
#&gt;        s   t   u   v   w   x   y   z
#&gt; [1,]  19  20  21  22  23  24  25  26
#&gt; [2,]  45  46  47  48  49  50  51  52
#&gt; [3,]  71  72  73  74  75  76  77  78
#&gt; [4,]  97  98  99 100 101 102 103 104
#&gt; [5,] 123 124 125 126 127 128 129 130</div><div class='input'>
<span class='no'>h</span>[<span class='kw pkg'>hash</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/hash/topics/keys'>keys</a></span>(<span class='no'>h</span>)[<span class='fl'>26</span>]] <span class='co'># key value pair</span></div><div class='output co'>#&gt; &lt;hash&gt; containing 1 key-value pair(s).
#&gt;   z :  26  52  78 104 130</div><div class='input'><span class='no'>h</span><span class='kw'>[[</span><span class='kw pkg'>hash</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/hash/topics/keys'>keys</a></span>(<span class='no'>h</span>)[<span class='fl'>26</span>]]] <span class='co'># value accessor method; same as next line</span></div><div class='output co'>#&gt; [1]  26  52  78 104 130</div><div class='input'><span class='kw pkg'>hash</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/hash/topics/values'>values</a></span>(<span class='no'>h</span>)[ , <span class='fl'>26</span>] <span class='co'># value accessor method; same as previous line</span></div><div class='output co'>#&gt; [1]  26  52  78 104 130</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Paul James.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

